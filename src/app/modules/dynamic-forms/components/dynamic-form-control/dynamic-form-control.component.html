<div class="form-group" [formGroup]="form">
  <!-- Form styling -->
  <mat-form-field [appearance]="control.appearance" [color]="control.color" [floatLabel]="control.floatLabel"
    class="w-100" [ngSwitch]="control.controlType">
    <!-- Label -->
    <mat-label [attr.for]="control.key">
      {{ control.label }}
    </mat-label>

    <!-- Text -->
    <input matInput *ngSwitchCase="'textbox'" [ngClass]="control.class" [formControlName]="control.key"
      [id]="control.key" [type]="control.type" />

    <!-- Text area -->
    <textarea matInput *ngSwitchCase="'textarea'" [ngClass]="control.class" [formControlName]="control.key"
      [id]="control.key"></textarea>

    <!-- Select -->
    <mat-select *ngSwitchCase="'dropdown'" [ngClass]="control.class" [formControlName]="control.key" [id]="control.key">
      <mat-option *ngFor="let opt of control.options" [value]="opt.key">
        {{ opt.value }}
      </mat-option>
    </mat-select>

    <!-- Date -->
    <input matInput *ngSwitchCase="'date'" [ngClass]="control.class" [formControlName]="control.key" [id]="control.key"
      [matDatepicker]="datePicker" />
    <mat-datepicker-toggle *ngSwitchCase="'date'" matSuffix [for]="datePicker"></mat-datepicker-toggle>
    <mat-datepicker #datePicker></mat-datepicker>

    <!-- Date range -->
    <mat-date-range-input *ngSwitchCase="'date-range'" [ngClass]="control.class" [formGroup]="dateRange"
      [rangePicker]="dateRangePicker">
      <input matStartDate placeholder="Start" formControlName="start" (dateChange)="setDateRange()" />
      <input matEndDate placeholder="Eind" formControlName="end" (dateChange)="setDateRange()" />
    </mat-date-range-input>
    <mat-datepicker-toggle *ngSwitchCase="'date-range'" matSuffix [for]="dateRangePicker"></mat-datepicker-toggle>
    <mat-date-range-picker #dateRangePicker></mat-date-range-picker>

    <!-- Chips -->
    <mat-chip-list *ngSwitchCase="'chips'" [ngClass]="control.class" #chipList>
      <mat-chip *ngFor="let item of control.value" [selectable]="control.selectable" [removable]="control.removable"
        (removed)="removeFromValue(item)">
        {{ item }}
        <mat-icon matChipRemove *ngIf="control.removable">cancel</mat-icon>
      </mat-chip>
      <input [placeholder]="control.placeholder" [matChipInputFor]="chipList"
        [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="control.addOnBlur"
        (matChipInputTokenEnd)="addToValue($event)" />
    </mat-chip-list>

    <!-- Radio -->
    <input matInput *ngSwitchCase="'radio'" [hidden]="true" />
    <mat-radio-group *ngSwitchCase="'radio'" [ngClass]="control.class" [formControlName]="control.key"
      [id]="control.key">
      <mat-radio-button *ngFor="let opt of control.options" [value]="opt.key">
        {{ opt.value }}
      </mat-radio-button>
    </mat-radio-group>

    <!-- Checkbox -->
    <input matInput *ngSwitchCase="'checkbox'" [hidden]="true" />
    <mat-checkbox *ngSwitchCase="'checkbox'" [ngClass]="control.class" [formControlName]="control.key"
      [id]="control.key" [labelPosition]="control.labelPosition" [indeterminate]="control.indeterminate" required>
      {{ control.label }}
    </mat-checkbox>

    <!-- Slide -->
    <input matInput *ngSwitchCase="'slide'" [hidden]="true" />
    <mat-slide-toggle *ngSwitchCase="'slide'" [ngClass]="control.class" [formControlName]="control.key"
      [id]="control.key" [checked]="control.value" [labelPosition]="control.labelPosition">
      {{ control.label }}
    </mat-slide-toggle>

    <!-- Errors -->
    <mat-error *ngIf="this.form.controls[this.control.key].errors?.min">
      {{ control.label }} is too <strong>low</strong>
    </mat-error>
    <mat-error *ngIf="this.form.controls[this.control.key].errors?.max">
      {{ control.label }} is too <strong>high</strong>
    </mat-error>
    <mat-error *ngIf="this.form.controls[this.control.key].errors?.required">
      {{ control.label }} is <strong>required</strong>
    </mat-error>
    <mat-error *ngIf="this.form.controls[this.control.key].errors?.requiredTrue">
      {{ control.label }} is not <strong>true</strong>
    </mat-error>
    <mat-error *ngIf="this.form.controls[this.control.key].errors?.email">
      {{ control.label }} is not <strong>email</strong>
    </mat-error>
    <mat-error *ngIf="this.form.controls[this.control.key].errors?.minLength">
      {{ control.label }} is too <strong>short</strong>
    </mat-error>
    <mat-error *ngIf="this.form.controls[this.control.key].errors?.maxLength">
      {{ control.label }} is too <strong>long</strong>
    </mat-error>
    <mat-error *ngIf="this.form.controls[this.control.key].errors?.pattern">
      {{ control.label }} is wrong <strong>pattern</strong>
    </mat-error>
  </mat-form-field>
</div>